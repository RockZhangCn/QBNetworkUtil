apply plugin: 'com.android.application'

android {

    packagingOptions
    {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE.txt'
    }
    signingConfigs {
        release {
            keyAlias 'rocksnzhang'
            keyPassword 'debugx5tools'
            storeFile file('../signature/debugx5.jks')
            storePassword 'debugx5tools'
        }
    }
    compileSdkVersion 23
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.tencent.rocksnzhang.qbnetworkutil"
        minSdkVersion 14
        targetSdkVersion 23
        versionCode 1
        versionName "0.8"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    tasks.withType(JavaCompile) {
        options.compilerArgs << "-Xlint:unchecked"
    }
}

task clearApk(type: Delete){
    delete '../release/' + APP_NAME + '_' + VERSION_NAME + '.apk'
}

task makeApk(type: Copy){
    from('build/outputs/apk/')
    into('../release/')
    include('app-debug.apk')
    rename('app-debug.apk', APP_NAME + '_' + VERSION_NAME + '.apk')
}

makeApk.dependsOn(clearApk, build)

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:support-v4:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'commons-io:commons-io:2.4'
    compile files('libs/okhttp-3.2.0.jar')
    compile files('libs/okio-1.6.0.jar')
    compile files('libs/netty-all-4.0.36.Final.jar')
    compile files('libs/commons-validator-1.5.0.jar')
}
